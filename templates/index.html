<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Audio Sentiment Bot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <div class="app-shell">
    <header class="site-header">
      <div class="site-header__inner">
        <div class="brand">
          <h1 class="brand__title">Audio Sentiment Bot</h1>
          <p class="brand__subtitle">
            Upload a short audio clip to transcribe speech with Google Web Speech and score the sentiment instantly.
          </p>
        </div>
      </div>
    </header>

    <main class="main-content">
      <div class="container">
        <div class="layout-grid">
          <section class="panel panel--accent" aria-labelledby="upload-heading">
            <div>
              <h2 class="panel__title" id="upload-heading">Analyze a clip</h2>
              <p class="panel__copy">
                Choose an audio file up to about one minute and pick a language. Results stay on this device.
              </p>
            </div>

            <form class="form-grid" data-form enctype="multipart/form-data" novalidate>
              <div class="field-group">
                <label class="field-label" for="audio-input">Audio file</label>
                <input
                  class="input-control"
                  id="audio-input"
                  name="audio"
                  type="file"
                  accept="audio/*"
                  required
                  data-input="audio"
                >
                <p class="field-hint">Supports WAV, MP3, M4A, and other common formats.</p>
              </div>

              <div class="field-group">
                <label class="field-label" for="language-select">Transcription language</label>
                <select class="input-control" id="language-select" name="language" data-input="language">
                  {% for code, label in languages %}
                  <option value="{{ code }}"{% if code == 'en-US' %} selected{% endif %}>{{ label }}</option>
                  {% endfor %}
                </select>
              </div>

              <button class="button" type="submit" data-submit>Analyze audio</button>
            </form>

            <p class="status-banner" data-status role="status" aria-live="polite">Ready.</p>

            <div class="waveform-card" data-waveform-container hidden>
              <div class="waveform-card__header">
                <h3 class="waveform-card__title" id="waveform-heading">Waveform preview</h3>
                <button class="button button--ghost" type="button" data-waveform-clear>
                  Clear preview
                </button>
              </div>
              <p class="waveform-card__copy">
                Live visualization of your audio file. We never upload this preview.
              </p>
              <canvas
                class="waveform-canvas"
                data-waveform
                role="img"
                aria-labelledby="waveform-heading"
              ></canvas>
              <p class="waveform-meta" data-waveform-meta></p>
            </div>
            <p class="waveform-empty" data-waveform-empty>
              Waveform preview appears after selecting an audio file.
            </p>
          </section>

          <section class="panel" aria-labelledby="history-heading">
            <div class="history-header">
              <h2 class="history-header__title" id="history-heading">Analysis history</h2>
              <p class="history-header__copy">Each result lists the language, timestamp, and transcript.</p>
            </div>

            <div class="history-list" data-results aria-live="polite"></div>
            <p class="empty-state" data-empty-state>Run your first analysis to populate your history.</p>
          </section>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="site-footer__inner">
        Tip: Need live capture? Use the command line streamer or desktop overlay included in this project.
      </div>
    </footer>
  </div>

  <script src="{{ url_for('static', filename='app.js') }}" defer></script>
</body>
</html>
